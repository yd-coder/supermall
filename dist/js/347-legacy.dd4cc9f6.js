(self["webpackChunksupermall"]=self["webpackChunksupermall"]||[]).push([[347],{3852:function(t,e,r){"use strict";r.r(e),r.d(e,{default:function(){return W}});var n=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",{attrs:{id:"home"}},[r("nav-bar",{staticClass:"home-nav"},[r("div",{attrs:{slot:"center"},slot:"center"},[t._v("购物街")])]),r("scroll",{ref:"scroll",staticClass:"content",attrs:{probeType:3,pullUpLoad:!0},on:{scroll:t.contentScroll,pullingUp:t.loadMore}},[r("swiper",{attrs:{banner:t.banner}}),r("recommend",{attrs:{recommend:t.recommend}}),r("feature-view"),r("tab-control",{staticClass:"tab-control",attrs:{title:["流行","新款","精选"]},on:{tabClick:t.tabClick}}),r("goods-list",{attrs:{goods:t.showGoods}})],1),r("back-top",{directives:[{name:"show",rawName:"v-show",value:t.isShowBackTop,expression:"isShowBackTop"}],nativeOn:{click:function(e){return t.backClick.apply(null,arguments)}}})],1)},o=[];function a(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}function s(t){if(Array.isArray(t))return a(t)}r(2526),r(1817),r(1539),r(2165),r(8783),r(3948),r(1038);function i(t){if("undefined"!==typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}r(7042),r(8309),r(4916),r(7601);function l(t,e){if(t){if("string"===typeof t)return a(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);return"Object"===r&&t.constructor&&(r=t.constructor.name),"Map"===r||"Set"===r?Array.from(t):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?a(t,e):void 0}}r(1703);function c(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function u(t){return s(t)||i(t)||l(t)||c()}var m=r(4800),d=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",[r("van-swipe",{staticClass:"home-swiper",attrs:{autoplay:2e3,"indicator-color":"white"}},t._l(t.banner,(function(t){return r("van-swipe-item",{key:t.index},[r("img",{directives:[{name:"lazy",rawName:"v-lazy",value:t.image,expression:"item.image"}],attrs:{alt:""}})])})),1)],1)},f=[],p={name:"Swiper",props:{banner:Array},data:function(){return{}},mounted:function(){},methods:{}},h=p,v=r(1001),b=(0,v.Z)(h,d,f,!1,null,"479ab29f",null),g=b.exports,y=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",{staticClass:"recommend"},t._l(t.recommend,(function(e){return r("div",{key:e.index,staticClass:"recommend-item"},[r("a",{attrs:{href:e.link}},[r("img",{attrs:{src:e.image,alt:""}}),r("div",[t._v(t._s(e.title))])])])})),0)},w=[],k={name:"Recommend",props:{recommend:Array},data:function(){return{}},mounted:function(){},methods:{}},_=k,C=(0,v.Z)(_,y,w,!1,null,"5bd3546d",null),T=C.exports,$=function(){var t=this,e=t.$createElement;t._self._c;return t._m(0)},x=[function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"feature"},[n("a",{attrs:{href:"https://act.mogujie.com/zzlx67"}},[n("img",{attrs:{src:r(6776),alt:""}})])])}],S={name:"Featureview",data:function(){return{}},mounted:function(){},methods:{}},A=S,Z=(0,v.Z)(A,$,x,!1,null,"320ad6b7",null),G=Z.exports,H=r(2015),E=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",{staticClass:"tab-control"},t._l(t.title,(function(e,n){return r("div",{key:n,staticClass:"tab-control-item",class:{active:n===t.currentIndex},on:{click:function(e){return t.itemClick(n)}}},[r("span",[t._v(t._s(e))])])})),0)},B=[],I={name:"Tabcontrol",props:{title:{type:Array,default:function(){return[]}}},data:function(){return{currentIndex:0}},mounted:function(){},methods:{itemClick:function(t){this.currentIndex=t,this.$emit("tabClick",t)}}},U=I,j=(0,v.Z)(U,E,B,!1,null,"2baf368a",null),M=j.exports,z=r(8501),L=r(8930),N=r(2924);function O(){return(0,N.W)({url:"/home/multidata",methods:"get"})}function P(t,e){return(0,N.W)({url:"/home/data",methods:"get",params:{type:t,page:e}})}var Y={name:"Home",components:{NavBar:m.Z,Swiper:g,Recommend:T,FeatureView:G,TabControl:M,GoodsList:z.Z,Scroll:H.Z,BackTop:L.Z},data:function(){return{banner:[],recommend:[],goods:{pop:{page:0,list:[]},new:{page:0,list:[]},sell:{page:0,list:[]}},currentType:"pop",isShowBackTop:!1,saveY:0}},computed:{showGoods:function(){return this.goods[this.currentType].list}},created:function(){this.getHomeMultidata(),this.getHomeGoods("pop"),this.getHomeGoods("new"),this.getHomeGoods("sell")},activated:function(){this.$refs.scroll.scroll.scrollTo(0,this.saveY,100)},deactivated:function(){this.saveY=this.$refs.scroll.scroll.y},methods:{getHomeMultidata:function(){var t=this;O().then((function(e){t.banner=e.data.banner.list,t.recommend=e.data.recommend.list}))},getHomeGoods:function(t){var e=this,r=this.goods[t].page+1;P(t,r).then((function(r){var n;(n=e.goods[t].list).push.apply(n,u(r.data.list)),e.goods[t].page+=1}))},tabClick:function(t){switch(t){case 0:this.currentType="pop";break;case 1:this.currentType="new";break;case 2:this.currentType="sell"}},backClick:function(){this.$refs.scroll.scroll.scrollTo(0,0,500)},contentScroll:function(t){this.isShowBackTop=-t.y>1e3},loadMore:function(){this.$refs.scroll.isPullUpLoad=!0,this.getHomeGoods(this.currentType),this.$refs.scroll.scroll.finishPullUp(),this.$refs.scroll.scroll.refresh(),this.$refs.scroll.isPullUpLoad=!1}}},F=Y,R=(0,v.Z)(F,n,o,!1,null,"24547d16",null),W=R.exports},1038:function(t,e,r){var n=r(2109),o=r(8457),a=r(7072),s=!a((function(t){Array.from(t)}));n({target:"Array",stat:!0,forced:s},{from:o})},6776:function(t,e,r){"use strict";t.exports=r.p+"img/recommend_bg.a1646d5d.jpg"}}]);
//# sourceMappingURL=347-legacy.dd4cc9f6.js.map