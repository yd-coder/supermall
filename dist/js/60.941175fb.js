"use strict";(self["webpackChunksupermall"]=self["webpackChunksupermall"]||[]).push([[60],{6304:function(e,t,s){s.r(t),s.d(t,{default:function(){return P}});var r=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{attrs:{id:"home"}},[s("nav-bar",{staticClass:"home-nav"},[s("div",{attrs:{slot:"center"},slot:"center"},[e._v("购物街")])]),s("scroll",{ref:"scroll",staticClass:"content",attrs:{probeType:3,pullUpLoad:!0},on:{scroll:e.contentScroll,pullingUp:e.loadMore}},[s("swiper",{attrs:{banner:e.banner}}),s("recommend",{attrs:{recommend:e.recommend}}),s("feature-view"),s("tab-control",{staticClass:"tab-control",attrs:{title:["流行","新款","精选"]},on:{tabClick:e.tabClick}}),s("goods-list",{attrs:{goods:e.showGoods}})],1),s("back-top",{directives:[{name:"show",rawName:"v-show",value:e.isShowBackTop,expression:"isShowBackTop"}],nativeOn:{click:function(t){return e.backClick.apply(null,arguments)}}})],1)},a=[],o=s(4800),n=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",[s("van-swipe",{staticClass:"home-swiper",attrs:{autoplay:2e3,"indicator-color":"white"}},e._l(e.banner,(function(e){return s("van-swipe-item",{key:e.index},[s("img",{directives:[{name:"lazy",rawName:"v-lazy",value:e.image,expression:"item.image"}],attrs:{alt:""}})])})),1)],1)},l=[],i={name:"Swiper",props:{banner:Array},data(){return{}},mounted(){},methods:{}},c=i,u=s(1001),d=(0,u.Z)(c,n,l,!1,null,"479ab29f",null),m=d.exports,p=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"recommend"},e._l(e.recommend,(function(t){return s("div",{key:t.index,staticClass:"recommend-item"},[s("a",{attrs:{href:t.link}},[s("img",{attrs:{src:t.image,alt:""}}),s("div",[e._v(e._s(t.title))])])])})),0)},h=[],f={name:"Recommend",props:{recommend:Array},data(){return{}},mounted(){},methods:{}},v=f,g=(0,u.Z)(v,p,h,!1,null,"5bd3546d",null),b=g.exports,k=function(){var e=this,t=e.$createElement;e._self._c;return e._m(0)},w=[function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"feature"},[r("a",{attrs:{href:"https://act.mogujie.com/zzlx67"}},[r("img",{attrs:{src:s(6776),alt:""}})])])}],_={name:"Featureview",data(){return{}},mounted(){},methods:{}},y=_,C=(0,u.Z)(y,k,w,!1,null,"320ad6b7",null),T=C.exports,x=s(2015),$=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"tab-control"},e._l(e.title,(function(t,r){return s("div",{key:r,staticClass:"tab-control-item",class:{active:r===e.currentIndex},on:{click:function(t){return e.itemClick(r)}}},[s("span",[e._v(e._s(t))])])})),0)},S=[],Z={name:"Tabcontrol",props:{title:{type:Array,default(){return[]}}},data(){return{currentIndex:0}},mounted(){},methods:{itemClick(e){this.currentIndex=e,this.$emit("tabClick",e)}}},G=Z,H=(0,u.Z)(G,$,S,!1,null,"2baf368a",null),B=H.exports,E=s(8501),U=s(8930),z=s(2924);function L(){return(0,z.W)({url:"/home/multidata",methods:"get"})}function M(e,t){return(0,z.W)({url:"/home/data",methods:"get",params:{type:e,page:t}})}var A={name:"Home",components:{NavBar:o.Z,Swiper:m,Recommend:b,FeatureView:T,TabControl:B,GoodsList:E.Z,Scroll:x.Z,BackTop:U.Z},data(){return{banner:[],recommend:[],goods:{pop:{page:0,list:[]},new:{page:0,list:[]},sell:{page:0,list:[]}},currentType:"pop",isShowBackTop:!1,saveY:0}},computed:{showGoods(){return this.goods[this.currentType].list}},created(){this.getHomeMultidata(),this.getHomeGoods("pop"),this.getHomeGoods("new"),this.getHomeGoods("sell")},activated(){this.$refs.scroll.scroll.scrollTo(0,this.saveY,100)},deactivated(){this.saveY=this.$refs.scroll.scroll.y},methods:{getHomeMultidata(){L().then((e=>{this.banner=e.data.banner.list,this.recommend=e.data.recommend.list}))},getHomeGoods(e){const t=this.goods[e].page+1;M(e,t).then((t=>{this.goods[e].list.push(...t.data.list),this.goods[e].page+=1}))},tabClick(e){switch(e){case 0:this.currentType="pop";break;case 1:this.currentType="new";break;case 2:this.currentType="sell"}},backClick(){this.$refs.scroll.scroll.scrollTo(0,0,500)},contentScroll(e){this.isShowBackTop=-e.y>1e3},loadMore(){this.$refs.scroll.isPullUpLoad=!0,this.getHomeGoods(this.currentType),this.$refs.scroll.scroll.finishPullUp(),this.$refs.scroll.scroll.refresh(),this.$refs.scroll.isPullUpLoad=!1}}},I=A,N=(0,u.Z)(I,r,a,!1,null,"24547d16",null),P=N.exports},6776:function(e,t,s){e.exports=s.p+"img/recommend_bg.a1646d5d.jpg"}}]);
//# sourceMappingURL=60.941175fb.js.map